<!-- src/main/resources/templates/eml-view.html -->
<!doctype html>
<html lang="de" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title th:text="'EML ' + ${mailId}">EML</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
  <!-- Header Navigation -->
  <th:block th:replace="~{fragments/header :: header('email')}"></th:block>

  <div class="container">
    <p class="notice">
      Achtung: Inhalte wurden sanitisiert; externe Ressourcen sind ggf. blockiert.
      <a th:href="@{/}">Weitere EML anzeigen</a>
    </p>

    <!-- E-Mail Header -->
    <div class="mail-header">
      <h2 th:text="${subject}">Betreff</h2>
      <table class="mail-header-table">
        <tr th:if="${from != null and !from.isEmpty()}">
          <td class="header-label">Von:</td>
          <td class="header-value" th:text="${from}">Absender</td>
        </tr>
        <tr th:if="${to != null and !to.isEmpty()}">
          <td class="header-label">An:</td>
          <td class="header-value" th:text="${to}">Empfänger</td>
        </tr>
        <tr th:if="${cc != null and !cc.isEmpty()}">
          <td class="header-label">CC:</td>
          <td class="header-value" th:text="${cc}">CC-Empfänger</td>
        </tr>
        <tr th:if="${date != null}">
          <td class="header-label">Datum:</td>
          <td class="header-value" th:text="${#dates.format(date, 'dd.MM.yyyy HH:mm:ss')}">Datum</td>
        </tr>
      </table>
    </div>

    <!-- Wichtig: th:utext rendert bereits SANITIZED HTML! -->
    <article class="mail" th:utext="${html}">(kein Inhalt)</article>
  </div>
</body>
</html>